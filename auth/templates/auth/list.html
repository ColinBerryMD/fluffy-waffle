{% extends 'base.html' %}

{% block content %}
    <div class="content">
        <h3 class="title">{% block title %}List Users{% endblock %}</h3>
        {% if users %}
            <hr>
            {% for user in users %}
                <div class="user">
                    <p>Username: {{ user.User }}</p>
                    <b/>
                    {% if user.email %}
                        <p class="name">{{ user.first }} {{ user.last }}</p>
                        <b/>
                        <p>Email: {{ user.email }}</p>
                        <p>SMS: {{ user.sms }}</p>
                        <p>Voice Phone: {{ user.voice }}</p>
                        {% if user.translate %}
                            <p>Requests translation to spanish.</p>
                        {% endif %}
                        {% if user.is_sms %}
                            <p>Has SMS access.</p>
                        {% endif %}
                        {% if user.is_admin %}
                            <p>Has administration privileges.</p>
                        {% endif %} 
                    {% else %}
                        <p>Not yet registered</p>
                    {% endif %}
                    {% if user.email %}
                        <form method="GET" class='button-row' action="{{ url_for('auth.edit', user_id=user.id) }}"> 
                            <input type="submit" value="Edit User"/>
                        </form>
                    {% endif %}
                        <form method="POST" class='button-row' action="{{ url_for('auth.delete', user_id=user.id) }}">   
                            <input type="submit" value="Delete User"
                                   onclick="return confirm('Are you sure you want to delete this user?')"/>
                        </form>
                        <form method="POST" class='button-row' action="{{ url_for('account.add_user', user_id=user.id) }}">   
                            <input type="submit" value="Add User to {{ session['account_name'] }}"/>
                        </form>
                        <hr>
                </div>
            {% endfor %}
        {% else %}
            <h2>No users found in database.</h2>
        {% endif %}
    </div>
{% endblock %}
